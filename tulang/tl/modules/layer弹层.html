<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>弹层提示</title>
    <!-- bootstap -->
    <link rel="stylesheet" href="../bootstrap-3.3.5/css/bootstrap.min.css">

    <!-- 字体图标 -->
    <link rel="stylesheet" href="../fonts/css/font-awesome.min.css">

    <link rel="stylesheet" href="../css/all.css"/>

    <style>
        .box {
            padding: 20px;
            margin-bottom: 100px;
            background-color: #ddd;
        }

        .box .title {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #000;
        }

    </style>
</head>
<body>

<div class="g-container">


    <div class="box">
        <a class="btn btn-primary j-alert" href="javascript:;">alert</a>
        <a class="btn btn-primary j-confirm" href="javascript:;">confirm</a>
        <a class="btn btn-primary j-msg" href="javascript:;">msg</a>

    </div>


    <div class="box">
        <a class="btn btn-primary j-open-zf" href="javascript:;">微信扫码支付</a>
        <a class="btn btn-primary j-open-sx" href="javascript:;">发送私信</a>
        <a class="btn btn-primary j-tips-user" href="javascript:;" data-id="1">用户名</a>
        <a class="btn btn-primary j-open-sjyz" href="javascript:;">手机验证</a>
    </div>


    <div class="box">
        <a class="btn btn-primary j-tips1" href="javascript:;">tips1</a>
        <a class="btn btn-primary j-tips2" href="javascript:;">tips2</a>
        <a class="btn btn-primary j-tips3" href="javascript:;">tips3</a>
        <a class="btn btn-primary j-tips4" href="javascript:;">tips4</a>
    </div>

</div>


<!-- 微信扫码支付 -->
<div class="popup popup-zf">
    <p class="text-center f-fz18">充值金额:<span class="m-c1">1000.00元</span></p>

    <p class="text-center"><img src="../img/ewm2.png" alt=""/></p>

    <p class="text-center">微信扫一扫支付</p>
</div>
<!-- /微信扫码支付 -->


<!-- 私信回复 -->
<div class="popup popup-sx">
    <form class="form-horizontal">
        <div class="form-group">
            <div class="formlabel">发送：</div>
            <div class="formipt">用户名</div>
        </div>
        <div class="form-group" style="margin-bottom:0;">
            <div class="formlabel">内容：</div>
            <div class="formipt">
                <textarea class="form-control" rows="5"></textarea>
            </div>
        </div>
    </form>
</div>
<!-- /私信回复 -->


<!-- 用户信息 -->
<div class="popup-user-tpl hide">
    <div class="popup-user">

        <div class="userInfo">
            <div class="media">
                <div class="media-left">
                    <a class="j-userUrl" href="javascript:;">
                        <img class="j-userImgUrl" width="100" height="100" src="../img/tx-default.png" alt=""/>
                    </a>
                </div>
                <div class="media-body">
                    <h4><a class="j-userUrl" href="javascript:;">用户名</a></h4>

                    <p class="j-userDes">该用户暂无一句话简介</p>

                    <div class="tag j-userTag">
                        <span class="label label-3 label-r label-sm">暂无标签</span><span
                            class="label label-3 label-r label-sm">暂无标签</span><span
                            class="label label-3 label-r label-sm">暂无标签</span><span
                            class="label label-3 label-r label-sm">暂无标签</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="userScore">
            <ul class="clearfix">
                <li>
                    <p class="num j-userScore1">2239</p>
                    <span>图狼信誉值</span>
                </li>
                <li>
                    <p class="num j-userScore2">4.3分</p>
                    <span>服务评分<br/>（<i class="j-userRw1">8</i>个任务）</span>
                </li>
                <li>
                    <p class="num j-userScore3">4.3分</p>
                    <span>雇主评分<br/>（<i class="j-userRw2"></i>个任务）</span>
                </li>
            </ul>
            <a class="sx btn btn-primary btn-w100 j-userSx" href="javascript:;">私信</a>
        </div>

        <div class="arrow"></div>

    </div>
</div>
<!-- /用户信息 -->


<!-- 手机验证 -->
<div class="popup popup-sjyz">
    <form id="f-form-sjyz">
        <p class="text-center">为了确保本人操作，请验证身份。验证成功后进行下一步操作。</p>

        <p class="text-center f-mb40">短信将发送至 15023361515，请注意查收！</p>


            <div class="form-group" style="width: 300px; margin-left: auto; margin-right:auto;">
                <div class="input-group">
                    <input name="ucode" type="text"
                           class="form-control validate[required]" placeholder="验证码" data-prompt-target="err2">
                                            <span class="input-group-btn">
                                                <button class="btn btn-primary j-sendCode" type="button">发送验证码</button>
                                            </span>
                </div>
                <span id="err2" class="err-place" style="right: 108px;"></span>
            </div>

    </form>
</div>
<!-- /手机验证 -->


<!-- jquery -->
<script src="../libs/jquery-2.2.2/jquery.min.js"></script>

<!-- bootsrap -->
<script src="../bootstrap-3.3.5/js/bootstrap.min.js"></script>

<!-- plugins -->
<link rel="stylesheet" href="../plugins/jquery-validationEngine/css/validationEngine.jquery.css">
<script src="../plugins/jquery-validationEngine/js/jquery.validationEngine-zh_CN.js"></script>
<script src="../plugins/jquery-validationEngine/js/jquery.validationEngine.min.js"></script>
<script src="../plugins/layer/layer.js"></script>


<!-- linkcloud -->
<script src="../js/main.js"></script>

<!-- your js -->
<script>
    $(function () {

        // alert
        $('.j-alert').click(function () {
            //eg1
            // layer.alert('只想简单的提示');

            //eg2
            // layer.alert('加了个图标', {icon: 1}); //这时如果你也还想执行yes回调，可以放在第三个参数中。

            //eg3
            layer.alert('有了回调', {area: 'auto'}, function (index) {
                //do something
                alert();
                layer.close(index);
            });
        });


        // confirm
        $('.j-confirm').click(function () {

            layer.confirm('是否删除？', {
                title: '提示',
                area: 'auto'
            }, function (index) {
                layer.close(index);
            }, function () {

            });

        });


        // msg
        $('.j-msg').click(function () {

            layer.msg('支付成功', {
                skin: 'layer-ext-moon-msg layer-ext-moon',
                area: 'auto',
                icon: 1,
                time: 2000 //2秒关闭（如果不配置，默认是3秒）
            }, function () {

            });

        });


        // tips
        $('.j-tips1').click(function () {
            layer.tips('111', this, {
                tips: 1,
                time: 50000,
                area: '100px'
            });
        });
        $('.j-tips2').click(function () {
            layer.tips('111', this, {
                tips: 2,
                time: 50000,
                area: '100px'
            });
        });
        $('.j-tips3').click(function () {
            layer.tips('111', this, {
                tips: 3,
                time: 50000,
                area: '100px'
            });
        });
        $('.j-tips4').click(function () {
            layer.tips('111', this, {
                tips: 4,
                time: 50000,
                area: '100px'
            });
        });


        var data = {
            uname: '用户名',
            url: 'xxx',
            imgUrl: 'yyyyyyy',
            des: '该用户暂无一句话简介,用户简介',
            tag: ['xxx', 'yyy', '000'],
            score1: '111',
            score2: '1.3分',
            score3: '1.3分',
            rw1: '1',
            rw2: '2'
        };
        var data2 = {
            uname: '2222',
            url: '222',
            imgUrl: '222',
            des: '2222,22222',
            tag: ['222', '3333', '44444'],
            score1: '566',
            score2: '2.2分',
            score3: '2.2分',
            rw1: '2',
            rw2: '3'
        };

        $('.j-tips-user').mouseover(function () {
            showUserInfo($(this), data2);
        });


        /**
         *
         * @param selector  获取页面用户选择器
         * @param userInfo  服务端获取用户数据
         */
        function showUserInfo(selector, userInfo) {
            var $tpl = $('.popup-user-tpl');
            var $selector = $(selector);
            var myLayer = null;
            var timer = null;
            var $useUrl = $tpl.find('.j-userUrl');
            var $userImgUrl = $tpl.find('.j-userImgUrl');
            var $userDes = $tpl.find('.j-userDes');
            var $userTag = $tpl.find('.j-userTag');
            var $userScore1 = $tpl.find('.j-userScore1');
            var $userScore2 = $tpl.find('.j-userScore2');
            var $userScore3 = $tpl.find('.j-userScore3');
            var $userRw1 = $tpl.find('.j-userRw1');
            var $userRw2 = $tpl.find('.j-userRw2');
            var $userSx = $tpl.find('.j-userSx');

            $useUrl.attr('href', userInfo.url);
            $userImgUrl.attr('src', userInfo.imgUrl);
            $userDes.html(userInfo.des);
            if (userInfo.tag.length > 0) {
                var str = '';

                for (var i = 0; i < userInfo.tag.length; i++) {
                    str += '<span class="label label-3 label-r label-sm">' + userInfo.tag[i] + '</span>';
                }
                $userTag.html(str);
            } else {
                $userTag.html('<span class="label label-3 label-r label-sm">暂无标签</span>');
            }

            $userScore1.html(userInfo.score1);
            $userScore2.html(userInfo.score2);
            $userScore3.html(userInfo.score3);
            $userRw1.html(userInfo.rw1);
            $userRw2.html(userInfo.rw2);
            $userSx.attr('href', userInfo.url);


            myLayer = layer.open({
                skin: '',
                type: 4,
                shade: 0,
                closeBtn: 0,
                tips: 4,
                content: [$tpl.html(), $selector]
            });

            $selector.on('mouseover', function () {
                clearTimeout(timer);
            });

            $selector.on('mouseout', function () {
                timer = setTimeout(function () {
                    layer.close(myLayer);
                }, 200);
            });

            $('#layui-layer' + myLayer).on('mouseover', function () {
                clearTimeout(timer);
            });

            $('#layui-layer' + myLayer).on('mouseout', function () {
                timer = setTimeout(function () {
                    layer.close(myLayer);
                }, 200);
            });
        }


        // open
        $('.j-open-zf').click(function () {
            layer.open({
                type: 1,
                area: ['500px'],
                title: '微信扫码支付',
                content: $('.popup-zf'), //捕获的元素
                btn: ['我已支付成功', '遇到问题'],
                yes: function (index, layero) { //或者使用btn1
                    alert('成功回调');
                    layer.close(index);
                },
                cancel: function (index) { //或者使用btn2
                    alert('失败回调');
                }
            });
        });


        $('.j-open-sx').click(function () {
            layer.open({
                type: 1,
                area: ['500px'],
                title: '发送私信',
                content: $('.popup-sx'), //捕获的元素
                btn: ['发送', '取消'],
                yes: function (index, layero) { //或者使用btn1
                    alert('成功回调');
                    layer.close(index);
                },
                cancel: function (index) { //或者使用btn2
                    alert('失败回调');
                }
            });
        });


        $('.j-open-sjyz').click(function () {
            $('#f-form-sjyz').validationEngine('attach');
            layer.open({
                type: 1,
                area: ['500px'],
                title: '发送私信',
                content: $('.popup-sjyz'), //捕获的元素
                btn: ['发送', '取消'],
                yes: function (index, layero) { //或者使用btn1

                    $('#f-form-sjyz').validationEngine('validate');

                    // layer.close(index);
                },
                cancel: function (index) { //或者使用btn2
                    alert('失败回调');
                }
            });
        });


    });
</script>
</body>
</html>