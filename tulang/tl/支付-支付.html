<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>支付-支付</title>
    <!-- bootstap -->
    <link rel="stylesheet" href="bootstrap-3.3.5/css/bootstrap.min.css">

    <!-- 字体图标 -->
    <link rel="stylesheet" href="fonts/css/font-awesome.min.css">

    <!-- linkcloud -->
    <!--<link rel="stylesheet" href="../css/demo.css">-->

    <!-- your css -->
    <!--<link rel="stylesheet" href="../css/customer.css">-->
    <link rel="stylesheet" href="css/all.css"/>


</head>
<body class="f-bg2">
<nav class="m-header navbar-fixed-top">
    <div class="g-container">
        <h1><a href="#"><img width="112" height="48" src="img/logo2.png" alt=""/></a><span class="sr-only">图狼网</span>
        </h1>

        <ul class="nav-main">
            <li class="active"><a href="#">了解我们</a></li>
            <li><a href="#">设计机构</a></li>
            <li><a href="#">寻找任务</a></li>
            <li><a href="#">图狼达人</a></li>
        </ul>

        <ul class="nav2">
            <li class="item search">
                <div class="input">
                    <input type="text"/>
                </div>
            </li>
            <li class="item fb">
                <a class="button" href="javascript:;">发布任务</a>
            </li>
            <li class="item msg">
                <span class="dot"></span>
                <img src="img/icon-msg.png" alt=""/>

                <div class="msgList">
                    <div class="inner">
                        <div class="text-center f-mb20">
                            <div class="tabs">
                                <a class="active" href="javascript:;">私信</a>
                                <a href="javascript:;">通知</a>
                            </div>
                        </div>
                        <ul>
                            <li>
                                <div class="media">
                                    <div class="media-left">
                                        <img class="img-circle" width="50" height="50" src="" alt=""/>
                                    </div>
                                    <div class="media-body">
                                        <div class="media-heading">用户名<span class="pull-right">3月15日</span></div>
                                        <p class="text-overflow">省深圳市南山区留仙大道世外桃源创意园省深圳市南山区留仙大道世外桃源创意园</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="media">
                                    <div class="media-left">
                                        <img class="img-circle" width="50" height="50" src="" alt=""/>
                                    </div>
                                    <div class="media-body">
                                        <div class="media-heading">用户名<span class="pull-right">3月15日</span></div>
                                        <p class="text-overflow">省深圳市南山区留仙大道世外桃源创意园省深圳市南山区留仙大道世外桃源创意园</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="media">
                                    <div class="media-left">
                                        <img class="img-circle" width="50" height="50" src="" alt=""/>
                                    </div>
                                    <div class="media-body">
                                        <div class="media-heading">用户名<span class="pull-right">3月15日</span></div>
                                        <p class="text-overflow">省深圳市南山区留仙大道世外桃源创意园省深圳市南山区留仙大道世外桃源创意园</p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="more">
                        <img src="img/icon-settings.png" alt=""/>
                        <a class="pull-right" href="javascript:;">查看更多</a>
                    </div>
                </div>
            </li>
            <li class="item tx">
                <div class="pic">
                    <span class="u-icon u-icon-v2"></span>
                    <img class="img-circle" width="50" height="50" src="img/tx-default.png" alt=""/>
                </div>
                <ul class="subNav">
                    <li><a href="javascript:;">我的主页</a></li>
                    <li><a href="javascript:;">我的账簿</a></li>
                    <li><a href="javascript:;">账号设置</a></li>
                    <li><a href="javascript:;"><span style="color: #ff4e4e;">退出</span></a></li>
                </ul>
            </li>
        </ul>

    </div>
</nav>
<div class="m-headerSpace"></div>


<div class="g-container f-mb30">
    <div class="m-cmBox f-p20">
        <div class="m-title3 nbb">
            <h2>图狼网-支付</h2>
        </div>
        <div class="clearfix" style="padding-left: 20px; line-height:30px;">
            <p class="text-muted pull-left">（定金支付类别）提示：如果72小时之内未付款，该订单将自动关闭。</p>

            <div class="pull-right">需支付 <span class="m-c1 f-fz22">¥ <b class="j-money1">2000.00</b></span></div>
        </div>

        <div class="m-panel2">
            <p>
                <label class="radio-inline f-mr30">
                    <input class="j-pay1" name="fangshi" type="radio"> 使用余额 (账户当前余额：<span
                        class="j-money2">5</span>元)
                </label>
            </p>

            <div>
                <label class="radio-inline f-mr30">
                    <input class="j-pay2" name="fangshi" type="radio"> 使用其他支付方式
                </label>
            </div>
        </div>


        <div class="m-panel2">

            <div style="margin-bottom: 40px">
                <p class="m-c1 j-zhifuzt">余额全款支付</p>

                <div class="j-zhifuxx"></div>
            </div>

            <div class="m-title4 j-sanfang">
                <h3 style="margin-bottom: 40px;">第三方支付 <span>支持微信支付、支付宝、银联支付等多种支付方式</span></h3>
                <ul class="m-paypal f-mb40">
                    <li>
                        <p><img src="img/zhifubao.png" alt=""></p>
                        <label class="radio-inline">
                            <input name="pay" type="radio" checked=""> 支付宝
                        </label>
                    </li>
                    <li>
                        <p><img src="img/weixin.png" alt=""></p>
                        <label class="radio-inline">
                            <input name="pay" type="radio"> 微信支付
                        </label>
                    </li>
                    <li>
                        <p><img src="img/yinlian.png" alt=""></p>
                        <label class="radio-inline">
                            <input name="pay" type="radio"> 银联在线
                        </label>
                    </li>
                </ul>
            </div>


            <div class="text-right">
                <a class="btn btn-primary btn-w150 btn-w j-pay" href="javascript:;">确认支付</a>
            </div>
        </div>


    </div>
</div>


<!-- S 底部 -->
<nav class="m-footer">
    <div class="g-container">
        <p class="info"><span>Copyright © 2014-2016 <a class="navbar-link"
                                                       href="javascript:;">kaistart.com</a></span><span>渝ICP备14039480号-1</span><span>京公网安备 33011002010123</span>
        </p>

        <p class="link">
            <a class="navbar-link" href="javascript:;">关于</a>|
            <a class="navbar-link" href="javascript:;">我们是谁</a>|
            <a class="navbar-link" href="javascript:;">帮助</a>|
            <a class="navbar-link" href="javascript:;">用户协议</a>|
            <a class="navbar-link" href="javascript:;">信任与安全</a>

            <a class="fa fa-weixin" href="javascript:;"></a>
            <a class="fa fa-weibo" href="javascript:;"></a>
        </p>
    </div>
</nav>
<!-- E 底部 -->


<div class="modal-prompt">
    <div class="inner text-center">
        <p style="font-size:18px; color: #757575;">请在新的窗口完成支付！</p>

        <p style="font-size:14px; color: #b8b8b8; margin-bottom: 40px;">请根据您的情况进行以下操作</p>

        <p><a class="mbtn mbtn-success j-ok" href="javascript:;">支付完成</a> <a class="mbtn mbtn-primary j-other"
                                                                             href="javascript:;">选择其他支付方式</a></p>
    </div>
</div>


<!-- jquery -->
<script src="libs/jquery-2.2.2/jquery.min.js"></script>

<!-- bootsrap -->
<script src="bootstrap-3.3.5/js/bootstrap.min.js"></script>

<!-- plugins -->
<script src="plugins/layer/layer.js"></script>

<!-- linkcloud -->
<script src="js/main.js"></script>

<!-- your js -->
<script>
    $(function () {


        // 支付弹出
        (function () {
            var myLayer;

            $('.j-pay').click(function () {

                // window.open();

                //自定页
                myLayer = layer.open({
                    title: false,
                    type: 1,
                    skin: 'layui-layer-tl', //样式类名
                    closeBtn: 0, //不显示关闭按钮
                    shift: 2,
                    shadeClose: false,
                    content: $('.modal-prompt'),
                    area: 'auto',
                    maxWidth: 400
                });
            });

            var $modal = $('.modal-prompt');
            var $ok = $modal.find('.j-ok');
            var $other = $modal.find('.j-other');


            // TODO
            $ok.click(function () {
                layer.close(myLayer);
            });

            $other.click(function () {
                layer.close(myLayer);
            });

        })();


        // 支付方式选择，计算金额
        var $money1 = $('.j-money1');   // 总金额
        var $money2 = $('.j-money2');   // 账户余额
        var $pay1 = $('.j-pay1');   // 使用余额
        var $pay2 = $('.j-pay2');   // 使用第三方
        var $zhifuzt = $('.j-zhifuzt');   // 支付状态标题（余额全款支付，）
        var $zhifuxx = $('.j-zhifuxx');   // 支付信息提示
        var $sanfang = $('.j-sanfang');   // 三方支付选择
        var byue = false;    // 若有余额，优先使用余额


        $pay1.click(function() {
            var num1 = parseFloat($money1.html());
            var num2 = parseFloat($money2.html());

            if (num2 >= num1) {
                pay2();
            } else {
                pay1();
            }
        });
        $pay2.click(function() {
            pay3();
        });

        // 1.判断余额
        function checkYue() {
            var num1 = parseFloat($money1.html());
            var num2 = parseFloat($money2.html());

            // 余额大于0，优先使用余额
            if (num2 > 0) {
                byue = true;
                $pay1.attr('disabled', false);
                $pay1.attr('checked', true);
            } else {
                byue = false;
                $pay1.attr('disabled', true);
                $pay2.attr('checked', true);
            }

            choosePay();
        }

        checkYue();

        // 选择支付方式
        function choosePay() {
            var num1 = parseFloat($money1.html());
            var num2 = parseFloat($money2.html());

            if (byue) {
                // 有余额，足够本次支付
                if (num2 >= num1) {
                    pay2();
                } else {
                    pay1();
                }
            }else{
                // 没有余额
                pay3();
            }
        }

        // 有余额，不够本次支付
        function pay1(){
            var num1 = parseFloat($money1.html());
            var num2 = parseFloat($money2.html());
            var num0 = Math.abs(num1 - num2);
            var str = '余额支付'+num2+'元，剩余 <span class="m-c1 f-fz22">¥'+num0+'</span> 元 用以下支付方式付款';

            $zhifuzt.html('余额支付');
            $zhifuxx.show().html(str);
            $sanfang.show();
        }

        // 有余额，足够本次支付
        function pay2(){
            $zhifuzt.html('余额全款支付');
            $zhifuxx.hide();
            $sanfang.hide();
        }

        // 第三方支付
        function pay3(){
            $zhifuzt.html('第三方支付');
            $zhifuxx.hide();
            $sanfang.show();
        }



    });
</script>
</body>
</html>